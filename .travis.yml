language: php
cache: false

sudo: false

php:
  - 7.4snapshot

env:
  matrix:
    - DEPENDENCIES="high"

before_script:
  - sh .travis.install.sh

script:
  - phpdbg -qrr vendor/bin/phpunit --testsuite=unit
  - ulimit -n 4096 && phpdbg -qrr ./vendor/bin/infection -vvv --test-framework-options='--testsuite=unit' --min-msi=84 --min-covered-msi=86

matrix:
  allow_failures:
    - php: nightly
